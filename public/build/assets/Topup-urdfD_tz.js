import{j as e,r as b,S as L}from"./app-DoBWYgz3.js";import{b as C,a as I,c as _,m as B,p as P}from"./permata-BbqOKftb.js";import{c as R}from"./utils-DUjf7G_t.js";import{G as T,E as A}from"./index-CAXEohh2.js";import{A as E}from"./AppLayout-DoTUXd5f.js";function z(n){return T({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z"},child:[]}]})(n)}const M=({label:n,name:s,type:l="text",value:c,onChange:r,checked:g=!1,error:i,placeholder:m,className:k="",required:u=!1,disabled:f=!1,prefix:p="",subfix:j="",rows:v=4,tsize:x,min:w})=>{const d=`
    [type='number']::-webkit-outer-spin-button,
  [type='number']::-webkit-inner-spin-button {
    -webkit-appearance: none;
    margin: 0;
  }
  [type='number'] {
    -moz-appearance: textfield;
  }
    mt-1 block w-full outline-none
    ${l==="toggle"?"rounded-full":"rounded-md"} 
    border ${i?"border-red-500":"border-gray-300"} 
    bg-muted/20 px-3 py-2 shadow-sm transition-all duration-200 text-md
    ${f?"cursor-not-allowed bg-gray-100":""} 
    ${p?"pl-12":"pr-10"}`,N=a=>{const y=a.target.value;r(y)},t=a=>{r(a)},S=()=>{if(l==="textarea")return e.jsx("textarea",{id:s,name:s,rows:v,value:c,onChange:N,placeholder:m||`Enter ${String(n).toLowerCase()}`,className:d,required:u,disabled:f,"aria-invalid":!!i,"aria-describedby":i?`${s}-error`:void 0});if(l==="rating")return e.jsxs("div",{className:"flex items-center gap-1",children:[[1,2,3,4,5].map(a=>e.jsx("button",{type:"button",onClick:()=>t(a),className:"text-2xl focus:outline-none","aria-label":`Rate ${a} star`,children:e.jsx(z,{className:a<=Number(c)?"text-yellow-400":"text-secondary-foreground"})},a)),e.jsx("input",{type:"hidden",name:s,value:c,onChange:N})]});if(l==="checkbox")return e.jsx("input",{type:"checkbox",id:s,name:s,checked:g,onChange:a=>r==null?void 0:r(a.target.checked),className:""});if(l==="toggle"){const a={xs:"text-xs",sm:"text-sm",md:"text-md",lg:"text-lg",xl:"text-xl"},o={xs:"h-4 w-12",sm:"h-5 w-14",md:"h-5 w-16",lg:"h-6 w-18",xl:"h-7 w-20"}[x??"md"],h=a[x??"md"];return e.jsxs("label",{className:`relative inline-flex items-center ${o}`,children:[e.jsx("input",{type:"checkbox",className:"peer sr-only",checked:g,onChange:$=>r==null?void 0:r($.target.checked),name:s}),e.jsx("div",{className:"h-full w-full rounded-full bg-gray-300 transition-colors duration-300 peer-checked:bg-green-500"}),e.jsx("div",{className:"absolute top-0.5 left-0.5 aspect-square h-[calc(100%-4px)] rounded-full bg-white shadow transition-transform duration-300 peer-checked:right-0.5 peer-checked:left-auto"}),e.jsx("span",{className:`absolute right-2 ${h} font-medium text-gray-600 peer-checked:hidden`,children:"No"}),e.jsx("span",{className:`absolute left-2 hidden ${h} font-medium text-white peer-checked:inline`,children:"Yes"})]})}return e.jsx("input",{id:s,name:s,type:l==="currency"?"number":l,value:c,onChange:N,placeholder:m||(n?`Ketik ${n==null?void 0:n.toLowerCase()}`:`Ketik ${s==null?void 0:s.toLowerCase()}`),className:R(d,"appearance-none [&::-webkit-inner-spin-button]:appearance-none [&::-webkit-outer-spin-button]:appearance-none"),required:u,disabled:f,"aria-invalid":!!i,"aria-describedby":i?`${s}-error`:void 0,step:l==="currency"?"0.01":void 0,min:w})};return e.jsxs("div",{className:k,children:[n&&e.jsxs("label",{htmlFor:s,className:"block text-sm font-medium text-secondary-foreground",children:[n,u&&e.jsx("span",{className:"text-red-500",children:" *"})]}),e.jsxs("div",{className:"relative mt-1",children:[p&&e.jsx("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center bg-muted px-3",children:e.jsx("span",{className:"text-sm font-bold text-muted-foreground",children:p})}),S(),j&&e.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3",children:e.jsx("span",{className:"text-sm font-bold text-muted-foreground",children:j})})]}),i&&e.jsx("p",{id:`${s}-error`,className:"mt-1 text-sm text-red-600",children:i})]})},V=({siswa:n,nouid:s,onClose:l})=>{const c=[{id:1,title:"BCA",name:"bca",logo:C,payment_type:"bank_transfer"},{id:2,title:"BNI",name:"bni",logo:I,payment_type:"bank_transfer"},{id:3,title:"BRI",name:"bri",logo:_,payment_type:"bank_transfer"},{id:4,title:"Mandiri",name:"mandiri",logo:B,payment_type:"bank_transfer"},{id:5,title:"Permata",name:"permata",logo:P,payment_type:"bank_transfer"}],r=[{id:1,amount:5e4},{id:2,amount:1e5},{id:3,amount:2e5},{id:4,amount:5e5},{id:5,amount:1e6}],[g,i]=b.useState(null),[m,k]=b.useState(null),[u,f]=b.useState(""),[p,j]=b.useState(""),[v,x]=b.useState(!1),[w,d]=b.useState(null),N=t=>{var y;t.preventDefault(),x(!0),d(null);const S=c.find(o=>o.name===g),a=p?parseInt(p):m?(y=r.find(o=>o.id===m))==null?void 0:y.amount:null;if(!S||!a||!u){d("Harap lengkapi semua data!"),x(!1);return}if(a<1e4){d("Nominal minimal Rp 10.000"),x(!1);return}try{const o=L.post(route("topup.charge",s),{bank:S.name,amount:a,phone:u,nouid:s},{onSuccess:()=>{console.log(o)},onError:h=>{d((h==null?void 0:h.message)||"Terjadi kesalahan saat memproses pembayaran")}})}catch(o){d("Terjadi kesalahan saat memproses pembayaran"),console.error(o)}finally{x(!1)}};return e.jsxs(E,{title:"Top Up",children:[e.jsxs("div",{className:"overflow-hidden rounded-lg bg-white shadow-md",children:[e.jsxs("div",{className:"flex items-center justify-between bg-primary px-4 py-4 text-primary-foreground",children:[e.jsxs("button",{onClick:()=>l(),className:"flex items-center space-x-2",children:[e.jsx(A,{className:"text-primary-foreground"}),e.jsx("span",{children:"Kembali"})]}),e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Topup Saldo"})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6 rounded-lg bg-gray-50 p-4",children:[e.jsx("h2",{className:"mb-2 text-lg font-semibold",children:"Informasi Siswa"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Nama"}),e.jsx("p",{className:"font-medium",children:n.namlen})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"NISN"}),e.jsx("p",{className:"font-medium",children:n.nis})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Kelas"}),e.jsx("p",{className:"font-medium",children:n.kel})]})]})]}),w&&e.jsx("div",{className:"mb-4 rounded-lg bg-red-100 p-3 text-red-700",children:w}),e.jsxs("form",{onSubmit:N,children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"mb-3 text-lg font-semibold",children:"Pilih Bank"}),e.jsx("div",{className:"grid grid-cols-3 gap-3",children:c.map(t=>e.jsxs("button",{type:"button",className:`flex flex-col items-center rounded-lg border p-3 ${g===t.name?"border-blue-500 bg-blue-50":"border-gray-300"}`,onClick:()=>i(t.name),children:[e.jsx("img",{src:t.logo,alt:t.name,className:"mb-1 h-8"}),e.jsx("span",{className:"text-sm",children:t.title})]},t.id))})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"mb-3 text-lg font-semibold text-primary",children:"Pilih Nominal"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.map(t=>e.jsx("button",{type:"button",className:`rounded-lg border p-3 transition-all ${m===t.id?"border-primary bg-primary text-primary-foreground shadow-sm":"border-primary bg-primary-foreground hover:bg-primary-foreground/40"}`,onClick:()=>{k(t.id),j("")},children:e.jsxs("div",{className:"font-medium",children:["Rp ",t.amount.toLocaleString("id-ID")]})},t.id)),e.jsx(M,{onChange:t=>{j(t?String(t):""),k(null)},name:"nominal",placeholder:"Masukkan Nominal Topup Anda",value:p,prefix:"Rp",className:"col-span-2",type:"number",min:"10000"})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{htmlFor:"phone",className:"mb-1 block text-sm font-medium text-gray-700",children:"Nomor Handphone"}),e.jsx("input",{type:"tel",id:"phone",className:"w-full rounded-lg border border-gray-300 p-3",placeholder:"Contoh: 081234567890",value:u,onChange:t=>f(t.target.value),required:!0})]}),e.jsx("button",{type:"submit",className:"w-full rounded-lg bg-blue-600 px-4 py-3 text-white transition duration-200 hover:bg-blue-700 disabled:bg-blue-400",disabled:v,children:v?"Memproses...":"Lanjutkan Pembayaran"})]})]})]}),e.jsxs("div",{className:"mx-auto mt-6 max-w-md rounded-lg bg-white p-6 shadow-md",children:[e.jsx("h2",{className:"mb-3 text-lg font-semibold",children:"Informasi Penting"}),e.jsxs("ul",{className:"list-disc space-y-2 pl-5 text-sm text-gray-700",children:[e.jsx("li",{children:"Pastikan nomor handphone yang dimasukkan benar"}),e.jsx("li",{children:"Proses topup membutuhkan waktu 1-5 menit"}),e.jsx("li",{children:"Jika mengalami kendala, hubungi customer service kami"}),e.jsx("li",{children:"Minimal topup Rp 10.000"})]})]})]})};export{V as default};
